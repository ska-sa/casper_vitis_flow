target=hw
link=1

[connectivity]
nk=krnl_mm2s:2:krnl_mm2s_0.krnl_mm2s_2
nk=krnl_s2mm:2:krnl_s2mm_0.krnl_s2mm_2
nk=krnl_counters:4:krnl_counters_rx_0.krnl_counters_tx_0.krnl_counters_rx_1.krnl_counters_tx_1

slr=rtl_kernel_wizard_1_1:SLR2
slr=krnl_mm2s_0:SLR2
slr=krnl_mm2s_2:SLR2
slr=krnl_s2mm_0:SLR2
slr=krnl_s2mm_2:SLR2
slr=krnl_counters_rx_0:SLR2
slr=krnl_counters_tx_0:SLR2
slr=krnl_counters_rx_1:SLR2
slr=krnl_counters_tx_1:SLR2

connect=io_clk_gtyquad_refclk0_00:rtl_kernel_wizard_1_1/gt
connect=io_gt_gtyquad_00:rtl_kernel_wizard_1_1/qsfp
connect=io_clk_gtyquad_refclk0_01:rtl_kernel_wizard_1_1/gt1
connect=io_gt_gtyquad_01:rtl_kernel_wizard_1_1/qsfp1
#connect=kernel_locked:rtl_kernel_wizard_1_1/ap_locked

# Connect counter kernels with network layers
stream_connect=krnl_counters_tx_0.out:rtl_kernel_wizard_1_1.mac0_s
stream_connect=rtl_kernel_wizard_1_1.mac0_m:krnl_counters_rx_0.in
stream_connect=krnl_counters_tx_1.out:rtl_kernel_wizard_1_1.mac1_s
stream_connect=rtl_kernel_wizard_1_1.mac1_m:krnl_counters_rx_1.in

# Connect memory mapped kernels with counter kernels
stream_connect=krnl_mm2s_0.k2n:krnl_counters_tx_0.in
stream_connect=krnl_counters_rx_0.out:krnl_s2mm_0.n2k
stream_connect=krnl_mm2s_2.k2n:krnl_counters_tx_1.in
stream_connect=krnl_counters_rx_1.out:krnl_s2mm_2.n2k

#stream_connect=rtl_kernel_wizard_0_1.axis_00:rtl_kernel_pfb_0_1.axis_01:32
#stream_connect=rtl_kernel_wizard_0_1.axis_02:rtl_kernel_pfb_0_1.axis_03:32
#stream_connect=rtl_kernel_pfb_0_1.axis_00:rtl_kernel_wizard_0_1.axis_01:32
#stream_connect=rtl_kernel_pfb_0_1.axis_02:rtl_kernel_wizard_0_1.axis_03:32


#[vivado]
[vivado]
#prop=run.impl.strategies=--config ../src/u280.ini --kernel_frequency 100 --vivado.impl.jobs 2 --vivado.impl.strategies Performance_Explore,Performance_ExploreWithRemap,Performance_NetDelay_high,Performance_NetDelay_low --from_step vpl.config_hw_runs Performance_Explore,Performance_ExploreWithRemap,Performance_NetDelay_high,Performance_NetDelay_low
#prop=run.synth.STEPS.SYNTH_DESIGN.TCL.PRE=../src/set_clocks.tcl
prop=run.impl_1.STEPS.INIT_DESIGN.TCL.POST=../src/set_clocks.tcl
#prop=run.synth.STEPS.SYNTH_DESIGN.TCL.PRE=../src/set_sys_clk.tcl
prop=run.impl_1.STEPS.OPT_DESIGN.TCL.PRE=../src/set_pins.tcl
#prop=run.impl_1.STEPS.OPT_DESIGN.ARGS.DIRECTIVE=Explore
#prop=run.impl_1.STEPS.PLACE_DESIGN.ARGS.DIRECTIVE=Explore
#prop=run.impl_1.STEPS.PHYS_OPT_DESIGN.IS_ENABLED=true
#prop=run.impl_1.STEPS.PHYS_OPT_DESIGN.ARGS.DIRECTIVE=Explore
#prop=run.impl_1.STEPS.ROUTE_DESIGN.ARGS.DIRECTIVE=Explore
#prop=run.__KERNEL__.{STEPS.OPT_DESIGN.TCL.PRE}=../src/set_pins.tcl
#--vivado.prop run.impl_1.STEPS.OPT_DESIGN.TCL.PRE=../src/set_pins.tcl


#--reuse_impl binary_container_1.build/link/vivado/vpl/prj/prj.runs/impl_1/level0_wrapper_routed.dcp
#--reuse_impl binary_container_1.build/link/vivado/vpl/prj/prj.runs/impl_1/pfm_top_wrapper_routed.dcp